jQuery(document).ready(function($){$(document).on('click','.load-more-btn',function(e){e.preventDefault();console.log('Load more button clicked');var button=$(this);var page=parseInt(button.data('page'));var max_pages=parseInt(button.data('max-pages'));var category=button.data('category');var context=button.data('context');var author=button.data('author');console.log('Page:',page,'Max pages:',max_pages,'Category:',category,'Context:',context,'Author:',author);console.log('AJAX Object:',uc_ajax_object);button.prop('disabled',!0).html('<i class="bx bx-loader bx-spin fs-xl me-2"></i>Loading...');$.ajax({url:uc_ajax_object.ajaxurl,type:'POST',data:{action:'load_more_posts',page:page,category:category,context:context,author:author,nonce:uc_ajax_object.nonce},success:function(response){console.log('AJAX Success:',response);if(response.success&&response.data){if(context==='author'){var rowContainer=button.prev('.row');if(rowContainer.length){$(response.data).children().each(function(){rowContainer.append(this)})}}else{button.before(response.data)}
button.data('page',page+1);if(page+1>=max_pages){button.remove()}else{button.prop('disabled',!1).html('<i class="bx bx-down-arrow-alt fs-xl me-2"></i>Show more')}}else{button.remove()}},error:function(xhr,status,error){console.error('AJAX Error:',status,error);console.log('Response:',xhr.responseText);button.prop('disabled',!1).html('<i class="bx bx-down-arrow-alt fs-xl me-2"></i>Show more');button.before('<p class="text-muted text-center">Error loading posts. Please try again.</p>')}})})})